<h3 class="mt-4 mb-1">Gestion des types d'horaires</h3>
<div *ngIf="config">
  <h5 class="m-0 font-weight-light">{{config.description}}</h5>
  <form id="config_form" [formGroup]="configForm" (ngSubmit)="onSubmit()" class="mb-4">
      <div formArrayName="timePeriodsTypes" class="mt-3">
        <div *ngFor="let tp of timePeriodsTypes.controls; let i = index" class="card mt-4">
          <div [formGroup]="tp" class="form-group mb-0 card-body">
            <div class="row">
              <div class="form-group col-sm-6">
                <label for="tp-desc-{{i}}" class="font-weight-bold">Nom<sup>*</sup></label>
                <input type="text" class="form-control" formControlName="description" id="tp-desc-{{i}}" aria-describedby="descHelp" placeholder="Ex : Horaires d'ouverture, horaires de cérémonie...">
                <small id="descHelp" class="form-text text-muted">Nom courant pour l'usage du type d'horaire au sein de l'application (hors exploitation).</small>
              </div>
              <div class="form-group col-sm-6">
                <label for="tp-ref-{{i}}" class="font-weight-bold">Référence<sup>*</sup></label>
                <input type="text" class="form-control" formControlName="reference" id="tp-ref-{{i}}" aria-describedby="refHelp" placeholder="Ex : ouverture, visite-guidee, ceremonie...">
                <small id="refHelp" class="form-text text-muted">Identifiant technique permettant d'identifier le type d'horaire, sans accent ni espace ou caractère spécial.</small>
              </div>
            </div>
            <div class="row align-items-end" [formGroup]="tp.get('labels')">
              <div *ngFor="let lang of allLangs(); let j = index" class="form-group col-sm-6">
                <label *ngIf="j === 0" class="font-weight-bold">Libellés</label>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">{{lang.toUpperCase()}}</span>
                  </div>
                  <input type="text" class="form-control" formControlName="{{lang}}" placeholder="Libellé {{lang.toUpperCase()}}">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <p *ngIf="config.timePeriodsTypes.length === 0" class="text-center mt-4 mb-4">
      Aucun type d'horaire saisi pour le moment.
    </p>
    <div class="text-right mt-3">
      <button class="btn btn-secondary" type="button" (click)="addTimePeriodType(timePeriodsTypes.controls.length)">
        Ajouter un type d'horaire
      </button>
    </div>
    <hr class="my-4"/>
    <ngb-alert *ngIf="submitted && saveComplete" type="success" (close)="dismissAlert()">La saisie a bien été enregistrée.</ngb-alert>
    <ngb-alert *ngIf="submitted && saveFailed" type="danger" (close)="dismissAlert()">Une erreur s'est produite lors de l'enregistrement de la saisie.</ngb-alert>
    <div class="text-right">
        <a class="btn btn-outline-dark" routerLink="/config">Annuler</a>
        <button class="btn btn-primary text-white" type="submit">Valider</button>
    </div>
  </form>
</div>

